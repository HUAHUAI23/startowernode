# 备份策略

备份策略大体可分为全量备份与增量备份两种形式。

至少要保证在一个周期内进行全量备份。



# 备份检查

备份检查项分为两种。

第一项：检查备份是否正常、是否存在不合理的语句也被备份了的情况。

第二项：检查备份空间是否够用，一般来说我们会将备份信息单独存放在另一块磁盘中。



# 备份种类

备份种类从根上来讲可分为两类、物理备份以及逻辑部分。

从备份时对正常生产的影响来说，又分为热备份、温备份、冷备份三种。

它们的区别如下：

- 热备份：对数据库正常业务影响较小，不会产生锁表行为的发生，并且在备份过程中新加入的数据也会进行备份，对于InnoDB存储引擎的表来说能够做到一致性恢复
- 温备份：在备份时会进行锁表操作，对于MyISAM存储引擎的表来说，将只能查询而不能修改，会影响到写入操作
- 冷备份：必须关停数据库业务，在数据没有任何变更的情况下进行备份

通常情况下我们都会选择热备份。



# 备份迁徙

备份迁徙可分为同架构迁徙和异架构迁徙。

如MySQL迁徙到MySQL属于同架构迁徙，而MongoDB迁徙到MySQL属于异架构迁徙。



# 备份演练

恢复演练是指在业务正常的情况中，在非生产库中进行手动误删除数据且恢复数据的操作。

用于应对任何可能对生产产生威胁的情况，如数据库宕机、磁盘损坏等。



# 恢复流程

当生产库中的数据发生异常时，采用以下流程进行数据恢复操作：

1. 将生产库中最近的全备文件和相关的二进制日志文件拷贝到测试库中
2. 在测试库中对全备文件以及二进制日志文件进行解析，尝试恢复所有正常数据与操作
3. 测试库中数据恢复完成之后，将整个测试库中恢复出的数据进行全备
4. 将测试库中生成的全备文件拷贝至生产库中，进行数据恢复